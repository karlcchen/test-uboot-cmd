
# setup network test ping 
setenv test-ping 'ping $serverip'; setenv setup-network 'setenv ipaddr 192.168.168.162; setenv serverip 192.168.168.250; run switch_init; run test-ping'

# for anderson-peak only 
setenv extra_params 'pci=pcie_bus_safe cpuidle.off=1'; setenv scx_params 'root=LABEL=A rw rootwait'
setenv extra_params 'pci=pcie_bus_safe'; setenv scx_params 'root=LABEL=A rw rootwait'

# === scx_boot_usb
setenv scx_boot_usb 'usb stop;sleep 3;usb start;run switch_init;run scx_boot_params;fatload usb 0 $loadaddr $fitname;if itest $? -eq 0;then bootm $loadaddr;fi'

# === test_scx_boot_usb
setenv test1_scx_boot_usb 'echo Hello Castle Peak!; run inc_loop; saveenv; ver; sysinfo; boardinfo get irv; boardinfo get desc; run scx_boot_usb'
setenv test2_scx_boot_usb 'echo Hello Castle Peak!; run inc_loop; saveenv; ver; sysinfo; boardinfo get irv; boardinfo get desc; run switch_init; run test-ping; run scx_boot_usb'

# === test_boot_usb
setenv test1_boot_usb 'echo Hello Castle Peak!; run inc_loop; saveenv; ver; sysinfo; boardinfo get irv; boardinfo get desc; run boot_usb'
setenv test2_boot_usb more 'echo Hello Castle Peak!; run inc_loop; saveenv; ver; sysinfo; boardinfo get irv; boardinfo get desc; run switch_init; run test-ping; run boot_usb'

# === inc_loop
setenv init_loop 'setenv loop 0 ; setenv loop_end 100000; savenv' 
setenv inc_loop 'setexpr.l loop ${loop} + 1; echo loop=${loop}'
setenv inc_loop_save 'run 'inc_loop; saveenv'

# === usb_read, usb_read_loop 
setenv usb_read 'fatload usb 0 $loadaddr $fitname; setenv test_status $?'; 
setenv usb_read_loop 'setenv loop 0; setenv loop_end 10000; saveenv; echo "usb read loop: from loop=${loop} to ${loop_end}..." ;while itest.l $loop -lt $loop_end ; do ; run usb_read; if itest ${test_status} -ne 0; then setenv loop ${loop_end}; echo "ERROR: Test Failed! status=${test_status}"; fi; run inc_loop ; done'

# === usb_start_read, run usb_start_loop
setenv usb_start_read 'usb stop; sleep 3; usb start; fatload usb 0 $loadaddr $fitname; setenv test_status $?'
setenv usb_start_read_loop 'setenv loop 0; setenv loop_end 10000; saveenv; echo "usb read2 loop: from loop=${loop} to ${loop_end}..." ;while itest.l $loop -lt $loop_end ; do ; run usb_start_read; if itest ${test_status} -ne 0; then setenv loop ${loop_end}; echo "ERROR: Test Failed! status=${test_status}"; fi; run inc_loop ; done'

